---
description: Gu铆a para c贸digo React moderno, TypeScript, Tailwind, y Server/Client State Management.
globs:
  - "src/**/*.{ts,tsx}"
alwaysApply: true
---

# 锔 Reglas de Implementaci贸n de Frontend (React)

##  Pila de Tecnolog铆as Obligatorias

Todo el c贸digo debe ser escrito utilizando las siguientes bibliotecas y convenciones:

- **Lenguaje:** **TypeScript** para toda la l贸gica y componentes.
- **Estilo:** **Tailwind CSS** (Utility-First). Evitar estilos en l铆nea o CSS Modules a menos que sea estrictamente necesario (ej. para animaciones o componentes de terceros sin soporte nativo de Tailwind).
- **Rutas:** **`react-router-dom`** (v6+). Usar el patr贸n de *Layout Routes* para estructuras de aplicaci贸n compartidas.
- **Estado de Servidor (Data Fetching):** **`@tanstack/react-query`**. Utilizar `useQuery`, `useMutation`, y la gesti贸n de cach茅 para todas las llamadas a API.
- **Validaci贸n de Esquemas:** **`Zod`**. Usar `Zod` como fuente 煤nica de verdad para la validaci贸n de *inputs* (formularios, API responses) y para inferir Tipos de TypeScript.
- **Gesti贸n de Estado Local/Global:** **`Zustand`**. Usar *stores* de Zustand para el estado global de cliente no relacionado con el servidor.

---

##  Mejores Pr谩cticas de Codificaci贸n (Solid, Bulletproof, etc.)

El objetivo es un c贸digo resiliente, performante, y f谩cil de mantener:

1.  **Separa la L贸gica de la Interfaz (Solid Principals / Bulletproof):**
    * Los componentes de React deben ser puros (pure presentational components), recibiendo datos y *handlers* como *props*.
    * La l贸gica de negocio, manejo de estado (Zustand) y *hooks* de datos (TanStack Query) deben residir en *custom hooks* o en la capa de **`features`** o **`domain`**.
    * Utiliza el patr贸n **Container/Presenter** (o **Smart/Dumb components**) para separar la l贸gica de la UI.

2.  **Manejo de Formularios (TanStack Form + Zod):**
    * Usar **`@tanstack/react-form`** para la gesti贸n del estado del formulario.
    * Usar el *adapter* de Zod con TanStack Form para la validaci贸n de esquemas en tiempo de ejecuci贸n.
    * La validaci贸n debe ser *client-side* (Zod) para UX, y asincr贸nicamente o *server-side* usando el mismo esquema Zod para seguridad (**Bulletproof Data Fetching**).

3.  **Inmutabilidad y Mutaciones:**
    * Fomenta el principio de **inmutabilidad** en todo el estado, especialmente en Zustand.
    * En TanStack Query, las operaciones de escritura deben ser `useMutation` y deben invalidar/actualizar la cach茅 de consultas relacionadas con `queryClient.invalidateQueries` o `queryClient.setQueryData` optimista.

4.  **Estructura de Carpetas (Feature-Sliced/Modular):**
    * Organizar el c贸digo por **caracter铆stica** (`features/user/`, `features/products/`) en lugar de por tipo de archivo (`components/`, `hooks/`).
    * Dentro de cada caracter铆stica, se pueden tener subcarpetas como `components`, `api` (para *queries* y *mutations*), `store` (para *stores* de Zustand espec铆ficas).

5.  **Tipado con Zod:**
    * Define esquemas Zod (`*.schema.ts`) para todas las estructuras de datos clave (API, Forms, Zustand State).
    * **NO** escribir tipos de TypeScript manualmente si se pueden inferir de un esquema Zod. Ejemplo: `type User = z.infer<typeof UserSchema>;`.

6.  **C贸digo Funcional y Legible:**
    * Prefiere los retornos tempranos (*early returns*) para reducir la anidaci贸n de `if`/`else`.
    * Usar funciones de flecha `const Component: FC<Props> = ({...}) => ...` para componentes funcionales.
    * Minimiza los efectos secundarios (`useEffect`) y busca patrones de estado de servidor (TanStack Query) o estado de cliente (Zustand) primero.

---

Este conjunto de reglas le proporciona a tu asistente de IA una hoja de ruta clara para generar c贸digo que cumpla con todos tus requisitos de tecnolog铆a y calidad.

Un tutorial te puede ser 煤til para ver la implementaci贸n de algunas de estas herramientas. Este video explica la combinaci贸n de TanStack Form y Zod, que es una de las partes clave de la regla: [TanStack Form y Zod para formularios en React](https://www.youtube.com/watch?v=DxotbweeJqQ).
http://googleusercontent.com/youtube_content/0
